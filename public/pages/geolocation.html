<section class="section hero is-success">
  <div class="container">
    <h1 class="title">{{greeting.title}}</h1>
    <h2 class="subtitle">
      {{greeting.subtitle}}
    </h2>
    <p class="subtitle">
      <em>Geolocation will only work with a secure network (HTTPS). This will be fixed soon.</em>
    </p>
  </div>
</section>
<section class="section">
  <div class="container">
    <article class="media is-large">
      <div class="media-content">
        <p class="title is-5">{{browser.title}}</p>
        <p class="content">{{browser.subtitle}}</p>
        <a href="https://caniuse.com/#feat=geolocation" class="button is-success is-outlined">
          <span class="icon">
            <i class="fa fa-bar-chart"></i>
          </span>
          <span>{{browser.btn}}</span>
        </a>
        <div class="spacer"></div>
        <div class="columns is-desktop">
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <span class="icon"><i class="fa fa-edge"></i></span><span> Edge</span>
                </div>
                <progress class="progress is-success" value="90" max="100">90%</progress>
              </div>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <span class="icon"><i class="fa fa-firefox"></i></span><span> Firefox</span>
                </div>
                <progress class="progress is-success" value="90" max="100">90%</progress>
              </div>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <span class="icon"><i class="fa fa-chrome"></i></span><span> Chrome</span>
                </div>
                <progress class="progress is-success" value="90" max="100">90%</progress>
              </div>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <span class="icon"><i class="fa fa-safari"></i></span><span> Safari</span>
                </div>
                <progress class="progress is-success" value="90" max="100">90%</progress>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article class="media is-large">
      <div class="media-content">
        <p class="title is-5">{{mobile.title}}</p>
        <p class="content">{{mobile.subtitle}}</p>
        <a href="https://caniuse.com/#feat=geolocation" class="button is-success is-outlined">
          <span class="icon">
            <i class="fa fa-bar-chart"></i>
          </span>
          <span>{{mobile.btn}}</span>
        </a>
        <div class="spacer"></div>
        <div class="columns is-desktop">
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <span class="icon"><i class="fa fa-apple"></i></span><span> IOS Safari + Chrome</span>
                </div>
                <progress class="progress is-success" value="90" max="100">90%</progress>
              </div>
            </div>
          </div>
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <span class="icon"><i class="fa fa-android"></i></span><span> Android Chrome</span>
                </div>
                <progress class="progress is-success" value="90" max="100">90%</progress>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article class="media is-large">
      <div class="media-content">
        <p class="title is-5">{{code.title}}</p>
        <p class="title is-5">.js</p>
        <div class="columns">
          <div class="column">
            <div class="box">
              <div class="media-content">
                <span>// This file will be your client-side js file.</span><br>
                <span>// In most cases this will be your main.js or app.js or whatever you want to call your file.</span><br><br>

                <span>'use strict';</span><br>
                <span>// This creates your web socket</span><br>
                <span>var socket = io();</span><br><br>

                <span>// collecting sensor data from the helper function renderGeoData and sending to server-side</span><br>
                <span>socket.on('geolocation', function (data) {</span><br>
                <span class="tab">renderGeoData(data);</span><br>
                <span>});</span><br><br>

                <span>// helper function for location data, receiving the following:</span><br>
                <span>// Latitude: specifies the north–south position of a point on the Earth's surface</span><br>
                <span>// Longitude: specifies the east-west position of a point on the Earth's surface</span><br>
                <span>// In this demonstration the user will be tracked when click event is fired.</span><br>
                <span>function renderGeoData(geoObj) {</span><br>
                <span class="tab">// variables to retrieve the object data from sensor-plug lib</span><br>
                <span class="tab">var latValue = geoObj.latitude;</span><br>
                <span class="tab">var lonValue = geoObj.longitude;</span><br><br>

                <span class="tab">// The following variables give you an example of the data visualization.</span><br>
                <span class="tab">// The sensor data in this case will change the text in the html.</span><br>
                <span class="tab">var latitude = document.getElementById("latitude");</span><br>
                <span class="tab">latitude.innerHTML = latValue;</span><br><br>

                <span class="tab">var longitude = document.getElementById("longitude");</span><br>
                <span class="tab">longitude.innerHTML = lonValue;</span><br>
                <span>}</span><br><br>

                <span>// click event to fire sensor-plug method below</span><br>
                <span>document.getElementById('button-get-position').addEventListener('click', function() {</span><br>
                <span class="tab">// sensor-plug: self executing function, fires the handleGeolocation method.</span><br>
                <span class="tab">Device.handleGeolocation();</span><br>
                <span>});</span><br><br>

                <span>// Check for Geolocation API permissions</span><br>
                <span>navigator.permissions.query({name:'geolocation'}).then(function(permissionStatus) {</span><br>
                <span class="tab">console.log('geolocation permission state is ', permissionStatus.state);</span><br><br>

                <span class="tab">permissionStatus.onchange = function() {</span><br>
                <span class="dbl-tab">console.log('geolocation permission state has changed to ', this.state);</span><br>
                <span class="tab">};</span><br>
                <span>});</span><br><br>

                <span>function log() {</span><br>
                <span class="tab">document.querySelector('#log').textContent += Array.prototype.join.call(arguments, '') + '\n';</span><br>
                <span>}</span><br><br>

                <span>var getNotBtn = document.getElementById('button-get-permission');</span><br><br>

                <span>getNotBtn.addEventListener('click', function() {</span><br>
                <span class="tab">Notification.requestPermission(function(result) {</span><br>
                <span class="tab">if (result === 'denied') {</span><br>
                <span class="dbl-tab">log('Permission wasn\'t granted.');</span><br>
                <span class="dbl-tab">return;</span><br>
                <span class="tab">} else if (result === 'default') {</span><br>
                <span class="dbl-tab">log('The permission request was dismissed.');</span><br>
                <span class="dbl-tab">return;</span><br>
                <span class="tab">}</span><br>
                <span class="tab">log('Permission was granted for notifications');</span><br>
                <span class="tab">});</span><br>
                <span>});</span><br>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article class="media is-large">
      <div class="media-content">
        <p class="title is-5">.html</p>
        <div class="columns">
          <div class="column">
            <div class="box">
              <div class="media-content my-code">
                <span>&lt;!-- This file will be your client-side html file. --></span><br>
                <span>&lt;!-- In most cases this will be your index.html or location.html or something else... --></span><br>
                <span>&lt;div></span><br>
                <span class="tab">&lt;!-- Below I am logging the Permissions API --></span><br>
                <span class="tab">&lt;div class="output"></span><br>
                <span class="dbl-tab">&lt;pre id="log">&lt;/pre></span><br>
                <span class="tab">&lt;/div></span><br>
                <span class="tab">&lt;br></span><br>
                <span class="tab">&lt;!-- The following span tags will illustrate the current value of the current location data --></span><br>
                <span class="tab">&lt;!-- Notice each id correlates to the variables in the js above -> getElementById <- --></span><br>
                <span class="tab">&lt;span id="latitude">unavailable&lt;/span></span><br>
                <span class="tab">&lt;span>° Latitude&lt;/span></span><br>
                <span class="tab">&lt;br></span><br>
                <span class="tab">&lt;span id="longitude">unavailable&lt;/span></span><br>
                <span class="tab">&lt;span>° Longitude&lt;/span></span><br>
                <span>&lt;/div></span><br>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
    <article class="media is-large">
      <div class="media-content">
        <p class="title is-5">{{example.title}}</p>
        <div class="buttons-wrapper">
          <button id="button-get-position" class="button">{{example.btn}}</button>
          <button id="button-get-permission" class="button">{{example.permissionBtn}}</button>
        </div>
        <br>
        <div class="columns">
          <div class="column">
            <div class="box">
              <div class="media-content">
                <div class="content">
                  <div device-geolocation>
                    <div class="output">
                      <pre id="log"></pre>
                    </div>
                    <br>
                    <span id="latitude" class="g-info">unavailable</span>
                    <span class="title is-6">{{example.lat}}</span>
                    <br>
                    <span id="longitude" class="g-info">unavailable</span>
                    <span class="title is-6">{{example.lon}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </article>
  </div>
</section>